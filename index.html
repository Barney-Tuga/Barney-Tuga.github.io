<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meus Planos de Treino</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a2a6c">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1000px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            position: relative;
            min-height: 600px;
        }

        header {
            background: linear-gradient(to right, #3494E6, #EC6EAD);
            color: white;
            text-align: center;
            padding: 30px 20px;
            position: relative;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        /* Estilos da página principal - RESPONSIVO */
        .dashboard {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (min-width: 900px) {
            .dashboard {
                flex-direction: row;
            }
            
            .dashboard > * {
                flex: 1;
            }
        }

        .workout-plans {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (min-width: 500px) {
            .workout-plans {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .plan-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            text-align: center;
            padding: 20px;
        }

        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .plan-icon {
            font-size: 2.5rem;
            color: #3498db;
            margin-bottom: 15px;
        }

        .plan-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .plan-card p {
            color: #7f8c8d;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
            text-align: center;
        }

        .btn-secondary {
            background: #2ecc71;
            color: white;
        }

        .btn-secondary:hover {
            background: #27ae60;
        }

        .btn-weight {
            background: #9b59b6;
            color: white;
            margin-bottom: 20px;
        }

        .btn-weight:hover {
            background: #8e44ad;
        }

        /* Estilos para a seção de peso */
        .weight-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            min-height: 300px;
        }

        .weight-section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3rem;
        }

        .weight-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        @media (min-width: 400px) {
            .weight-form {
                flex-direction: row;
            }
        }

        .weight-input {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .weight-input:focus {
            border-color: #9b59b6;
            outline: none;
        }

        .weight-chart-container {
            height: 250px;
            position: relative;
        }

        /* Estilos da página de categorias */
        .categories {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        @media (min-width: 500px) {
            .categories {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 768px) {
            .categories {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .category-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            text-align: center;
            padding: 20px;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .category-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .chest-icon {
            color: #e74c3c;
        }

        .legs-icon {
            color: #3498db;
        }

        .back-icon {
            color: #2ecc71;
        }

        .category-card h3 {
            font-size: 1.3rem;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .category-card p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        /* Estilos da página de lista de exercícios */
        .exercise-list {
            margin: 15px 0;
        }

        .exercise-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #eee;
            transition: background 0.2s;
        }

        .exercise-item:hover {
            background: #f9f9f9;
        }

        .exercise-image {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            background: linear-gradient(to right, #3498db, #2c3e50);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 12px;
            color: white;
            font-size: 1.2rem;
        }

        .exercise-details {
            flex-grow: 1;
        }

        .exercise-details h3 {
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .exercise-stats {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .exercise-stats span {
            background: #f3f3f3;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            color: #7f8c8d;
        }

        /* Estilos da página de exercício */
        .exercise-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }

        @media (min-width: 600px) {
            .exercise-info {
                flex-direction: row;
                text-align: left;
            }
        }

        .exercise-image-large {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            background: linear-gradient(to right, #3498db, #2c3e50);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 0;
            margin-bottom: 15px;
            color: white;
            font-size: 2rem;
        }

        @media (min-width: 600px) {
            .exercise-image-large {
                margin-right: 20px;
                margin-bottom: 0;
            }
        }

        .exercise-details-large h2 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.4rem;
        }

        .exercise-stats-large {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        @media (min-width: 600px) {
            .exercise-stats-large {
                justify-content: flex-start;
            }
        }

        .exercise-stats-large span {
            background: #f3f3f3;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            color: #7f8c8d;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .training-table {
            width: 100%;
            padding: 15px;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        @media (min-width: 600px) {
            .training-table {
                font-size: 1rem;
                padding: 20px;
            }
        }

        .training-table th {
            text-align: left;
            padding: 12px;
            background-color: #3498db;
            color: white;
            font-size: 0.9rem;
        }

        @media (min-width: 600px) {
            .training-table th {
                padding: 15px;
                font-size: 1rem;
            }
        }

        .training-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        @media (min-width: 600px) {
            .training-table td {
                padding: 12px;
            }
        }

        .training-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .training-table tr:hover {
            background-color: #f1f1f1;
        }

        .input-field {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: border-color 0.3s;
        }

        @media (min-width: 600px) {
            .input-field {
                padding: 12px;
                font-size: 1rem;
            }
        }

        .input-field:focus {
            border-color: #3498db;
            outline: none;
        }

        .input-field.error {
            border-color: #e74c3c;
        }

        .series-header {
            width: 25%;
        }

        .reps-header, .weight-header {
            width: 37.5%;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 15px;
            justify-content: center;
        }

        @media (min-width: 500px) {
            .action-buttons {
                flex-direction: row;
            }
        }

        .btn-timer {
            background: #e74c3c;
            color: white;
        }

        .btn-timer:hover {
            background: #c0392b;
        }

        .btn-next {
            background: #2ecc71;
            color: white;
        }

        .btn-next:hover {
            background: #27ae60;
        }

        .btn-next:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .timer-container {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            text-align: center;
            width: 90%;
            max-width: 300px;
        }

        .timer-display {
            font-size: 2.5rem;
            font-weight: bold;
            color: #e74c3c;
            margin: 15px 0;
        }

        .timer-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .timer-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .btn-start {
            background: #2ecc71;
            color: white;
        }

        .btn-cancel {
            background: #7f8c8d;
            color: white;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        footer {
            text-align: center;
            padding: 15px;
            color: #7f8c8d;
            font-size: 0.8rem;
            border-top: 1px solid #eee;
        }

        /* Estilos da página de resumo */
        .workout-summary {
            padding: 15px;
        }

        .summary-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .summary-header h2 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.4rem;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        @media (min-width: 500px) {
            .summary-stats {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 0.8rem;
        }

        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px;
            font-size: 0.8rem;
        }

        @media (min-width: 600px) {
            .summary-table {
                font-size: 0.9rem;
            }
        }

        .summary-table th {
            background-color: #3498db;
            color: white;
            padding: 10px;
            text-align: left;
            font-size: 0.8rem;
        }

        @media (min-width: 600px) {
            .summary-table th {
                padding: 12px;
                font-size: 0.9rem;
            }
        }

        .summary-table td {
            padding: 8px 10px;
            border-bottom: 1px solid #eee;
        }

        @media (min-width: 600px) {
            .summary-table td {
                padding: 10px 12px;
            }
        }

        .summary-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        /* Modal para registro de peso */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            width: 90%;
            max-width: 400px;
        }

        .modal h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9rem;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .form-group input:focus {
            border-color: #9b59b6;
            outline: none;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .btn-cancel {
            background: #e74c3c;
            color: white;
        }

        .btn-save {
            background: #2ecc71;
            color: white;
        }

        /* Esconder páginas não ativas */
        .page {
            display: none;
        }

        .active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Página 1: Página principal (visível inicialmente) -->
        <div id="home-page" class="page active">
            <header>
                <h1>Meus Planos de Treino</h1>
                <p>Acompanhe seus treinos e evolução</p>
            </header>
            
            <div class="content">
                <div class="dashboard">
                    <div>
                        <button class="btn btn-weight" onclick="openWeightModal()">
                            <i class="fas fa-weight-scale"></i> Registrar Peso Atual
                        </button>
                        
                        <div class="workout-plans">
                            <div class="plan-card" onclick="showCategories()">
                                <div class="plan-icon">
                                    <i class="fas fa-dumbbell"></i>
                                </div>
                                <h3>Plano de Treino 1</h3>
                                <p>Treino de força e resistência</p>
                            </div>
                            
                            <div class="plan-card">
                                <div class="plan-icon">
                                    <i class="fas fa-running"></i>
                                </div>
                                <h3>Plano de Treino 2</h3>
                                <p>Treino cardio e definição</p>
                            </div>
                        </div>
                        
                        <button class="btn btn-secondary">Editar Planos de Treino</button>
                    </div>
                    
                    <div class="weight-section">
                        <h2>Evolução do Peso</h2>
                        <div class="weight-chart-container">
                            <canvas id="weightChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <footer>
                <p>© 2023 Meus Planos de Treino. Todos os direitos reservados.</p>
            </footer>
        </div>
        
        <!-- Página 2: Página de categorias (inicialmente oculta) -->
        <div id="categories-page" class="page">
            <header>
                <button class="back-button" onclick="showHome()">
                    <i class="fas fa-arrow-left"></i> Voltar
                </button>
                <h1>Plano de Treino 1</h1>
                <p>Selecione o grupo muscular para hoje</p>
            </header>
            
            <div class="content">
                <div class="categories">
                    <div class="category-card" onclick="showExerciseList('Peito')">
                        <div class="category-icon chest-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>Peito</h3>
                        <p>Exercícios para desenvolvimento do peitoral</p>
                    </div>
                    
                    <div class="category-card" onclick="showExerciseList('Perna')">
                        <div class="category-icon legs-icon">
                            <i class="fas fa-walking"></i>
                        </div>
                        <h3>Perna</h3>
                        <p>Exercícios para membros inferiores</p>
                    </div>
                    
                    <div class="category-card" onclick="showExerciseList('Costas')">
                        <div class="category-icon back-icon">
                            <i class="fas fa-arrows-alt-v"></i>
                        </div>
                        <h3>Costas</h3>
                        <p>Exercícios para dorsais e lombares</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Página 3: Lista de exercícios (inicialmente oculta) -->
        <div id="exercise-list-page" class="page">
            <header>
                <button class="back-button" onclick="showCategories()">
                    <i class="fas fa-arrow-left"></i> Voltar
                </button>
                <h1 id="category-title">Treino de Peito</h1>
                <p>Selecione um exercício para ver detalhes</p>
            </header>
            
            <div class="content">
                <div class="exercise-list" id="exercise-list-container">
                    <!-- Os exercícios serão carregados dinamicamente via JavaScript -->
                </div>
                
                <button class="btn btn-secondary" onclick="startWorkout()">Iniciar Treino</button>
            </div>
        </div>
        
        <!-- Página 4: Página de exercício (inicialmente oculta) -->
        <div id="exercise-page" class="page">
            <header>
                <button class="back-button" onclick="showExerciseList(currentCategory)">
                    <i class="fas fa-arrow-left"></i> Voltar
                </button>
                <h1 id="exercise-title">Agachamento</h1>
                <p>Preencha suas repetições e pesos realizados</p>
            </header>
            
            <div class="exercise-info">
                <div class="exercise-image-large">
                    <i class="fas fa-dumbbell"></i>
                </div>
                <div class="exercise-details-large">
                    <h2 id="exercise-name">Agachamento Livre</h2>
                    <div class="exercise-stats-large">
                        <span><i class="fas fa-bullseye"></i> Objetivo: <span id="exercise-goal">4x10 repetições</span></span>
                        <span><i class="fas fa-weight-hanging"></i> Peso alvo: <span id="exercise-weight">50kg</span></span>
                    </div>
                </div>
            </div>
            
            <table class="training-table">
                <thead>
                    <tr>
                        <th class="series-header">Série</th>
                        <th class="reps-header">Repetições Realizadas</th>
                        <th class="weight-header">Peso Utilizado (kg)</th>
                    </tr>
                </thead>
                <tbody id="exercise-table-body">
                    <!-- Conteúdo gerado dinamicamente -->
                </tbody>
            </table>
            
            <div class="action-buttons">
                <button class="btn btn-timer" onclick="iniciarTemporizador()">
                    <i class="fas fa-clock"></i> Temporizador (2min)
                </button>
                <button class="btn btn-next" id="next-exercise-btn" onclick="proximoExercicio()">
                    Próximo Exercício <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
        
        <!-- Página 5: Resumo do treino (inicialmente oculta) -->
        <div id="summary-page" class="page">
            <header>
                <button class="back-button" onclick="showHome()">
                    <i class="fas fa-arrow-left"></i> Voltar ao Início
                </button>
                <h1>Treino Concluído!</h1>
                <p>Resumo do seu desempenho</p>
            </header>
            
            <div class="workout-summary">
                <div class="summary-header">
                    <h2 id="summary-category">Treino de Peito</h2>
                    <p>Concluído em <span id="workout-duration">00:00:00</span></p>
                </div>
                
                <div class="summary-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="total-exercises">0</div>
                        <div class="stat-label">Exercícios</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="total-series">0</div>
                        <div class="stat-label">Séries</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="total-reps">0</div>
                        <div class="stat-label">Repetições</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-value" id="avg-weight">0kg</div>
                        <div class="stat-label">Peso Médio</div>
                    </div>
                </div>
                
                <h3>Detalhes do Treino</h3>
                <table class="summary-table">
                    <thead>
                        <tr>
                            <th>Exercício</th>
                            <th>Séries</th>
                            <th>Reps</th>
                            <th>Peso Médio</th>
                        </tr>
                    </thead>
                    <tbody id="summary-table-body">
                        <!-- Conteúdo gerado dinamicamente -->
                    </tbody>
                </table>
                
                <button class="btn btn-secondary" onclick="showHome()">
                    <i class="fas fa-home"></i> Voltar ao Início
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal para registro de peso -->
    <div class="modal" id="weightModal">
        <h2>Registrar Peso</h2>
        <div class="form-group">
            <label for="weightValue">Peso (kg)</label>
            <input type="number" id="weightValue" step="0.1" min="0" placeholder="Ex: 75.5">
        </div>
        <div class="form-group">
            <label for="weightDate">Data</label>
            <input type="date" id="weightDate">
        </div>
        <div class="modal-buttons">
            <button class="modal-btn btn-cancel" onclick="closeWeightModal()">Cancelar</button>
            <button class="modal-btn btn-save" onclick="saveWeight()">Salvar</button>
        </div>
    </div>
    
    <div class="overlay" id="overlay"></div>
    
    <div class="timer-container" id="timerContainer">
        <h2>Temporizador de Descanso</h2>
        <div class="timer-display" id="timerDisplay">02:00</div>
        <div class="timer-buttons">
            <button class="timer-btn btn-start" onclick="iniciarContagem()">Iniciar</button>
            <button class="timer-btn btn-cancel" onclick="fecharTemporizador()">Cancelar</button>
        </div>
    </div>

    <script>
        // Variável global para controlar a categoria atual
        let currentCategory = '';
        let currentExerciseIndex = 0;
        let workoutStartTime = null;
        let workoutData = {
            category: '',
            duration: 0,
            exercises: []
        };
        
        // Dados dos exercícios por categoria
        const exercisesByCategory = {
            'Peito': [
                { 
                    name: 'Supino Reto', 
                    goal: '4x8', 
                    weight: '40kg',
                    series: 4,
                    goalReps: 8
                },
                { 
                    name: 'Supino Inclinado', 
                    goal: '4x10', 
                    weight: '30kg',
                    series: 4,
                    goalReps: 10
                },
                { 
                    name: 'Crucifixo', 
                    goal: '3x12', 
                    weight: '12kg',
                    series: 3,
                    goalReps: 12
                },
                { 
                    name: 'Flexão de Braço', 
                    goal: '4x15', 
                    weight: 'Peso corporal',
                    series: 4,
                    goalReps: 15
                }
            ],
            'Perna': [
                { 
                    name: 'Agachamento', 
                    goal: '4x10', 
                    weight: '50kg',
                    series: 4,
                    goalReps: 10
                },
                { 
                    name: 'Leg Press', 
                    goal: '4x12', 
                    weight: '80kg',
                    series: 4,
                    goalReps: 12
                },
                { 
                    name: 'Cadeira Extensora', 
                    goal: '3x15', 
                    weight: '30kg',
                    series: 3,
                    goalReps: 15
                },
                { 
                    name: 'Panturrilha', 
                    goal: '4x20', 
                    weight: '50kg',
                    series: 4,
                    goalReps: 20
                }
            ],
            'Costas': [
                { 
                    name: 'Barra Fixa', 
                    goal: '4x Máx', 
                    weight: 'Peso corporal',
                    series: 4,
                    goalReps: 0
                },
                { 
                    name: 'Puxada Alta', 
                    goal: '4x10', 
                    weight: '40kg',
                    series: 4,
                    goalReps: 10
                },
                { 
                    name: 'Remada Curvada', 
                    goal: '4x8', 
                    weight: '35kg',
                    series: 4,
                    goalReps: 8
                },
                { 
                    name: 'Pull-down', 
                    goal: '3x12', 
                    weight: '30kg',
                    series: 3,
                    goalReps: 12
                }
            ]
        };

        // Inicializar dados de peso
        let weightData = JSON.parse(localStorage.getItem('weightData')) || [];
        let weightChart = null;

        // Inicializar a aplicação
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar data atual como padrão no modal
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('weightDate').value = formattedDate;
            
            // Inicializar gráfico de peso
            initWeightChart();
        });

        // Funções para o controle de peso
        function openWeightModal() {
            document.getElementById('weightModal').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function closeWeightModal() {
            document.getElementById('weightModal').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        function saveWeight() {
            const weightValue = parseFloat(document.getElementById('weightValue').value);
            const weightDate = document.getElementById('weightDate').value;
            
            if (!weightValue || weightValue <= 0) {
                alert('Por favor, insira um peso válido.');
                return;
            }
            
            if (!weightDate) {
                alert('Por favor, selecione uma data.');
                return;
            }
            
            // Adicionar novo registro
            weightData.push({
                date: weightDate,
                weight: weightValue
            });
            
            // Ordenar por data
            weightData.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            // Salvar no localStorage
            localStorage.setItem('weightData', JSON.stringify(weightData));
            
            // Atualizar gráfico
            updateWeightChart();
            
            // Fechar modal e limpar campos
            closeWeightModal();
            document.getElementById('weightValue').value = '';
            
            alert('Peso registrado com sucesso!');
        }

        function initWeightChart() {
            const ctx = document.getElementById('weightChart').getContext('2d');

            const labels = weightData.map(item => {
                const date = new Date(item.date);
                return date.toLocaleDateString('pt-BR');
            });

            const data = weightData.map(item => item.weight);

            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Peso (kg)',
                        data: data,
                        borderColor: '#9b59b6',
                        backgroundColor: 'rgba(155, 89, 182, 0.2)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.3,
                        pointRadius: 5,
                        pointBackgroundColor: '#9b59b6'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            suggestedMin: Math.min(...data) - 2,
                            suggestedMax: Math.max(...data) + 2,
                            title: {
                                display: true,
                                text: 'Peso (kg)'
                            }
                        },
                        x: {
                            offset: true,
                            title: {
                                display: true,
                                text: 'Data'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Peso: ${context.parsed.y} kg`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function updateWeightChart() {
            if (!weightChart) return;
            
            const labels = weightData.map(item => {
                const date = new Date(item.date);
                return date.toLocaleDateString('pt-BR');
            });
            
            const data = weightData.map(item => item.weight);
            
            weightChart.data.labels = labels;
            weightChart.data.datasets[0].data = data;
            weightChart.update();
        }

        // Funções de navegação
        function showHome() {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('home-page').classList.add('active');
        }
        
        function showCategories() {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('categories-page').classList.add('active');
        }
        
        function showExerciseList(category) {
            currentCategory = category;
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('exercise-list-page').classList.add('active');
            
            // Atualizar título da página
            document.getElementById('category-title').textContent = `Treino de ${category}`;
            
            // Carregar exercícios da categoria
            const exerciseListContainer = document.getElementById('exercise-list-container');
            exerciseListContainer.innerHTML = '';
            
            exercisesByCategory[category].forEach((exercise, index) => {
                const exerciseItem = document.createElement('div');
                exerciseItem.className = 'exercise-item';
                
                exerciseItem.innerHTML = `
                    <div class="exercise-image">
                        <i class="fas fa-dumbbell"></i>
                    </div>
                    <div class="exercise-details">
                        <h3>${exercise.name}</h3>
                        <div class="exercise-stats">
                            <span>${exercise.goal}</span>
                            <span>${exercise.weight}</span>
                        </div>
                    </div>
                `;
                
                exerciseListContainer.appendChild(exerciseItem);
            });
        }
        
        function showExercise(exerciseIndex) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('exercise-page').classList.add('active');
            
            currentExerciseIndex = exerciseIndex;
            const exerciseData = exercisesByCategory[currentCategory][exerciseIndex];
            
            // Preencher dados do exercício
            document.getElementById('exercise-title').textContent = exerciseData.name;
            document.getElementById('exercise-name').textContent = exerciseData.name;
            document.getElementById('exercise-goal').textContent = `${exerciseData.goal} repetições`;
            document.getElementById('exercise-weight').textContent = exerciseData.weight;
            
            // Gerar tabela de séries
            const tableBody = document.getElementById('exercise-table-body');
            tableBody.innerHTML = '';
            
            for (let i = 0; i < exerciseData.series; i++) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${i+1}ª Série</td>
                    <td><input type="number" class="input-field reps-input" placeholder="${exerciseData.goalReps || '0'} (objetivo)" data-series="${i}"></td>
                    <td><input type="number" class="input-field weight-input" placeholder="${exerciseData.weight}" data-series="${i}"></td>
                `;
                tableBody.appendChild(row);
            }
            
            // Validar campos e atualizar botão
            validateInputs();
        }
        
        function validateInputs() {
            const repsInputs = document.querySelectorAll('.reps-input');
            const weightInputs = document.querySelectorAll('.weight-input');
            const nextButton = document.getElementById('next-exercise-btn');
            
            let allFilled = true;
            
            repsInputs.forEach(input => {
                if (!input.value) {
                    allFilled = false;
                    input.classList.add('error');
                } else {
                    input.classList.remove('error');
                }
            });
            
            weightInputs.forEach(input => {
                if (!input.value) {
                    allFilled = false;
                    input.classList.add('error');
                } else {
                    input.classList.remove('error');
                }
            });
            
            nextButton.disabled = !allFilled;
        }
        
        function startWorkout() {
            // Iniciar contagem do tempo de treino
            workoutStartTime = new Date();
            workoutData = {
                category: currentCategory,
                startTime: workoutStartTime,
                exercises: []
            };
            
            // Ir para o primeiro exercício
            showExercise(0);
        }
        
        function saveExerciseData() {
            const repsInputs = document.querySelectorAll('.reps-input');
            const weightInputs = document.querySelectorAll('.weight-input');
            const exerciseData = exercisesByCategory[currentCategory][currentExerciseIndex];
            
            const seriesData = [];
            let totalReps = 0;
            let totalWeight = 0;
            let validWeightCount = 0;
            
            for (let i = 0; i < exerciseData.series; i++) {
                const reps = parseInt(repsInputs[i].value) || 0;
                const weight = parseFloat(weightInputs[i].value) || 0;
                
                seriesData.push({
                    series: i + 1,
                    reps: reps,
                    weight: weight
                });
                
                totalReps += reps;
                
                if (weight > 0) {
                    totalWeight += weight;
                    validWeightCount++;
                }
            }
            
            const avgWeight = validWeightCount > 0 ? (totalWeight / validWeightCount).toFixed(1) : 0;
            
            // Salvar dados do exercício
            workoutData.exercises.push({
                name: exerciseData.name,
                series: seriesData,
                totalReps: totalReps,
                avgWeight: avgWeight
            });
        }
        
        function proximoExercicio() {
            // Salvar dados do exercício atual
            saveExerciseData();
            
            // Verificar se é o último exercício
            if (currentExerciseIndex < exercisesByCategory[currentCategory].length - 1) {
                showExercise(currentExerciseIndex + 1);
            } else {
                // Finalizar treino e mostrar resumo
                finishWorkout();
            }
        }
        
        function finishWorkout() {
            // Calcular tempo total de treino
            const endTime = new Date();
            const duration = Math.floor((endTime - workoutStartTime) / 1000);
            workoutData.duration = duration;
            
            // Formatar tempo
            const hours = Math.floor(duration / 3600);
            const minutes = Math.floor((duration % 3600) / 60);
            const seconds = duration % 60;
            
            const formattedTime = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Calcular totais
            let totalExercises = workoutData.exercises.length;
            let totalSeries = 0;
            let totalReps = 0;
            let totalWeight = 0;
            let validWeightCount = 0;
            
            workoutData.exercises.forEach(exercise => {
                totalSeries += exercise.series.length;
                totalReps += exercise.totalReps;
                
                if (exercise.avgWeight > 0) {
                    totalWeight += parseFloat(exercise.avgWeight);
                    validWeightCount++;
                }
            });
            
            const avgWeight = validWeightCount > 0 ? (totalWeight / validWeightCount).toFixed(1) : 0;
            
            // Atualizar página de resumo
            document.getElementById('summary-category').textContent = `Treino de ${workoutData.category}`;
            document.getElementById('workout-duration').textContent = formattedTime;
            document.getElementById('total-exercises').textContent = totalExercises;
            document.getElementById('total-series').textContent = totalSeries;
            document.getElementById('total-reps').textContent = totalReps;
            document.getElementById('avg-weight').textContent = `${avgWeight}kg`;
            
            // Preencher tabela de resumo
            const summaryBody = document.getElementById('summary-table-body');
            summaryBody.innerHTML = '';
            
            workoutData.exercises.forEach(exercise => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${exercise.name}</td>
                    <td>${exercise.series.length}</td>
                    <td>${exercise.totalReps}</td>
                    <td>${exercise.avgWeight}kg</td>
                `;
                summaryBody.appendChild(row);
            });
            
            // Mostrar página de resumo
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('summary-page').classList.add('active');
        }
        
        // Funções do temporizador
        function iniciarTemporizador() {
            document.getElementById('timerContainer').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }
        
        function fecharTemporizador() {
            document.getElementById('timerContainer').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            clearInterval(window.timerInterval);
            document.getElementById('timerDisplay').textContent = '02:00';
        }
        
        function iniciarContagem() {
            let timeLeft = 2 * 60; // 2 minutos em segundos
            const timerDisplay = document.getElementById('timerDisplay');
            const startBtn = document.querySelector('.btn-start');
            
            startBtn.disabled = true;
            startBtn.textContent = 'Executando...';
            
            window.timerInterval = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                
                seconds = seconds < 10 ? '0' + seconds : seconds;
                timerDisplay.textContent = `${minutes}:${seconds}`;
                
                if (timeLeft === 0) {
                    clearInterval(window.timerInterval);
                    startBtn.disabled = false;
                    startBtn.textContent = 'Iniciar';
                    alert("Tempo de descanso finalizado! Volte ao treino.");
                    fecharTemporizador();
                } else {
                    timeLeft--;
                }
            }, 1000);
        }
        
        // Adicionar event listeners para validação em tempo real
        document.addEventListener('input', function(e) {
            if (e.target.classList.contains('reps-input') || e.target.classList.contains('weight-input')) {
                validateInputs();
            }
        });
        
        // Adicionar validação aos campos de entrada
        document.querySelectorAll('.input-field').forEach(input => {
            input.addEventListener('change', function() {
                if (this.value < 0) this.value = 0;
                validateInputs();
            });
        });
    </script>
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("sw.js")
            .then(() => console.log("✅ Service Worker registado"))
            .catch(err => console.log("❌ Erro no SW", err));
        }
    </script>
</body>
</html>
